<Window x:Class="ScottWisper.StatusIndicatorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Status Indicator"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        Topmost="True"
        Width="200"
        Height="80"
        ResizeMode="NoResize"
        Left="{Binding Source={x:Static SystemParameters.WorkArea}, Path=Width-220}"
        Top="{Binding Source={x:Static SystemParameters.WorkArea}, Path=Height-100}"
        MouseDown="Window_MouseDown"
        Loaded="Window_Loaded">
    
    <Window.Resources>
        <!-- Storyboard for pulsing animation (recording state) -->
        <Storyboard x:Key="PulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)">
                <EasingDoubleKeyFrame KeyTime="0" Value="0.6"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.8" Value="1.0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.6" Value="0.6"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        
        <!-- Storyboard for spinning animation (processing state) -->
        <Storyboard x:Key="SpinAnimation" RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ProcessingIcon"
                                       Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="360"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        
        <!-- Storyboard for shake animation (error state) -->
        <Storyboard x:Key="ShakeAnimation">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)">
                <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="-5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="5"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        
        <!-- Storyboard for fade animation (complete state) -->
        <Storyboard x:Key="FadeAnimation">
            <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)"
                           From="1.0" To="0.0" Duration="0:0:2"/>
        </Storyboard>
    </Window.Resources>
    
    <Grid Name="MainGrid" Background="#80000000" CornerRadius="12" Margin="0">
        <Grid.Effect>
            <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="3" Opacity="0.3"/>
        </Grid.Effect>
        
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Status Indicator Circle -->
        <Viewbox Grid.Column="0" Width="40" Height="40" Margin="15,15,5,15">
            <Grid Name="StatusIndicatorGrid">
                <!-- Idle State: Gray Circle -->
                <Ellipse Name="IdleIndicator" Fill="#808080" Visibility="Collapsed"/>
                
                <!-- Recording State: Red Pulsing Circle -->
                <Ellipse Name="RecordingIndicator" Fill="#FF4444" Visibility="Collapsed"/>
                
                <!-- Processing State: Blue Spinning Indicator -->
                <Grid Name="ProcessingIndicator" Visibility="Collapsed">
                    <Ellipse Fill="#4444FF" Opacity="0.6"/>
                    <Ellipse Name="ProcessingIcon" Fill="#4444FF" Width="20" Height="20">
                        <Ellipse.RenderTransform>
                            <RotateTransform CenterX="10" CenterY="10"/>
                        </Ellipse.RenderTransform>
                        <Ellipse.OpacityMask>
                            <RadialGradientBrush>
                                <GradientStop Color="Transparent" Offset="0"/>
                                <GradientStop Color="Black" Offset="0.5"/>
                                <GradientStop Color="Transparent" Offset="0.7"/>
                            </RadialGradientBrush>
                        </Ellipse.OpacityMask>
                    </Ellipse>
                </Grid>
                
                <!-- Complete State: Green Checkmark -->
                <Grid Name="CompleteIndicator" Visibility="Collapsed">
                    <Ellipse Fill="#44FF44"/>
                    <Path Stroke="White" StrokeThickness="3" Fill="Transparent"
                          Data="M 10 15 L 18 25 L 30 8" 
                          Stretch="Uniform" Margin="8"/>
                </Grid>
                
                <!-- Error State: Red Warning Icon -->
                <Grid Name="ErrorIndicator" Visibility="Collapsed">
                    <Ellipse Fill="#FF4444"/>
                    <Grid Name="ErrorIcon" RenderTransformOrigin="0.5,0.5">
                        <Grid.RenderTransform>
                            <TranslateTransform/>
                        </Grid.RenderTransform>
                        <Rectangle Fill="White" Width="20" Height="3" Margin="0,10,0,0"/>
                        <Rectangle Fill="White" Width="3" Height="20" Margin="0,0,0,0"/>
                    </Grid>
                </Grid>
            </Grid>
        </Viewbox>
        
        <!-- Status Text and Details -->
        <StackPanel Grid.Column="1" Margin="10,15,15,15" VerticalAlignment="Center">
            <TextBlock Name="StatusText" 
                       Foreground="White" 
                       FontWeight="SemiBold"
                       FontSize="14"
                       FontFamily="Segoe UI"
                       Text="Ready"/>
            
            <TextBlock Name="StatusDescription" 
                       Foreground="#CCCCCC" 
                       FontSize="10"
                       FontFamily="Segoe UI"
                       Text="Ready for dictation"
                       Margin="0,2,0,0"/>
        </StackPanel>
        
        <!-- Tooltip content -->
        <Grid.ToolTip>
            <ToolTip Background="#333333" Foreground="White" BorderThickness="0">
                <StackPanel>
                    <TextBlock Name="TooltipTitle" FontWeight="Bold" Text="ScottWisper Status"/>
                    <TextBlock Name="TooltipDetails" Text="Current status and actions"/>
                </StackPanel>
            </ToolTip>
        </Grid.ToolTip>
    </Grid>
</Window>