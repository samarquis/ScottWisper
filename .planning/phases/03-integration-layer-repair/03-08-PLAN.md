---
phase: 03-integration-layer-repair
plan: 08
type: execute
wave: 1
depends_on: []
files_modified: [SettingsWindow.xaml.cs]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Application builds without compilation errors"
    - "All code in SettingsWindow.xaml.cs is properly structured within method definitions"
    - "No orphaned try-catch blocks exist outside of method signatures"
  artifacts:
    - path: "SettingsWindow.xaml.cs"
      provides: "Clean UI code without compilation errors"
      min_lines: 500
  key_links:
    - from: "SettingsWindow.xaml.cs"
      to: "Application Build"
      via: "Code structure within method definitions"
      pattern: "No orphaned code blocks"
---

<objective>
Fix compilation errors by removing orphaned code blocks in SettingsWindow.xaml.cs to restore application build capability.

Purpose: Remove duplicated/orphaned try-catch blocks (lines 488-524) that prevent compilation, enabling the application to build successfully.
Output: Clean SettingsWindow.xaml.cs with all code properly structured within method definitions.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/03-integration-layer-repair/03-04-SUMMARY.md
@.planning/phases/03-integration-layer-repair/03-integration-layer-repair-VERIFICATION.md

@SettingsWindow.xaml.cs
</context>

<tasks>

<task type="auto">
  <name>Remove orphaned code blocks from SettingsWindow.xaml.cs</name>
  <files>SettingsWindow.xaml.cs</files>
  <action>Remove orphaned try-catch blocks starting at line 488 and ending at line 524. These are duplicated code blocks that exist outside any method definition. 

Specifically:
1. Remove the entire orphaned block from line 488 (try) through line 524 (})
2. The block contains duplicate device testing logic that was already properly implemented in the preceding method
3. Ensure clean removal without affecting the surrounding valid code structure
4. Verify that line 486 (which ends a method) connects properly to line 526 (which starts RefreshDevices_Click method)

The orphaned code to remove:
- Lines 488-523: try-catch block with device testing logic
- Line 524: closing brace of orphaned block

This will eliminate the compilation error "Invalid token 'try' in member declaration" and restore clean code structure.</action>
  <verify>dotnet build --verbosity normal --no-restore</verify>
  <done>Application builds successfully without compilation errors and SettingsWindow.xaml.cs has no orphaned code blocks</done>
</task>

</tasks>

<verification>
Build the application to verify compilation errors are resolved and SettingsWindow.xaml.cs compiles successfully.
</verification>

<success_criteria>
- Application builds without compilation errors
- SettingsWindow.xaml.cs has no orphaned code blocks
- All code is properly structured within method definitions
- Build completes successfully with 0 compilation errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-integration-layer-repair/03-08-SUMMARY.md`
</output>