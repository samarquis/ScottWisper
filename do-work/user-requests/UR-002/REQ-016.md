---
id: REQ-016
title: Implement API Rate Limiting
status: completed
created_at: 2026-02-06T17:55:00Z
completed_at: 2026-02-07T12:30:00Z
user_request: UR-002
batch: nist-compliance
---

# Implement API Rate Limiting

## What
Implement local rate limiting for audio capture triggers and API requests to prevent resource exhaustion and potential DoS (SEC-007).

## Detailed Requirements
- Limit the number of transcription requests per minute.
- Implement a cooling-off period if limits are hit.
- Log rate-limiting events as warnings.
- Linked Bead: ScottWisper-h54q

## Implementation Details
- Added `EnableCaptureRateLimiting` and `MaxCapturesPerMinute` to `AudioSettings` in `AppSettings.cs`.
- Integrated `TokenBucketRateLimiter` into `AudioCaptureService.cs` to throttle `StartCaptureAsync` calls.
- Enhanced `WhisperService.cs` with structured logging for its existing transcription rate limiter.
- Added structured logging for capture rate limiting events.
- Verified with new unit tests in `AudioCaptureRateLimitingTests.cs`.

## Full Context
See [user-requests/UR-002/input.md](./user-requests/UR-002/input.md) for complete verbatim input.
